<Window x:Class="SpinMonitor.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="620" Width="540" WindowStartupLocation="CenterOwner">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Library Settings -->
                <TextBlock Text="Library Settings" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>
                
                <TextBlock Text="Library folder with MP3s to fingerprint:"/>
                <DockPanel Margin="0,4,0,16">
                    <Button Content="Browse..." Width="100" Margin="8,0,0,0" Click="Browse_Click" DockPanel.Dock="Right"/>
                    <TextBox Text="{Binding LibraryFolder}"/>
                </DockPanel>

                <TextBlock Text="Refresh interval (minutes) for rescanning:"/>
                <TextBlock Text="  • Applies to: MP3 library indexing and radio streams reload" 
                           FontSize="10" Foreground="Gray" Margin="0,0,0,4"/>
                <TextBox Text="{Binding RefreshMinutes}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,16"/>

                <TextBlock Text="SQLite database path:"/>
                <TextBox Text="{Binding Persistence.SqlitePath}" Margin="0,4,0,16"/>

                <Separator Margin="0,8,0,16"/>

                <!-- Audio Detection Parameters -->
                <TextBlock Text="Audio Detection Parameters" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>

                <TextBlock Text="Minimum match confidence (0.0 - 1.0):"/>
                <TextBox Text="{Binding Detection.MinConfidence}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,12"/>

                <TextBlock Text="Query window (seconds):"/>
                <TextBox Text="{Binding Detection.QueryWindowSeconds}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,12"/>

                <TextBlock Text="Query hop interval (seconds):"/>
                <TextBox Text="{Binding Detection.QueryHopSeconds}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,16"/>

                <Separator Margin="0,8,0,16"/>

                <!-- Reconnection Settings -->
                <TextBlock Text="Stream Reconnection Settings" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>

                <TextBlock Text="Reconnect delay (seconds):"/>
                <TextBlock Text="  • Time to wait before reconnecting to offline streams" 
                           FontSize="10" Foreground="Gray" Margin="0,0,0,4"/>
                <TextBox Text="{Binding Reconnect.DelaySeconds}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,12"/>

                <TextBlock Text="Offline timeout (seconds):"/>
                <TextBlock Text="  • How long before a stream is considered permanently offline" 
                           FontSize="10" Foreground="Gray" Margin="0,0,0,4"/>
                <TextBox Text="{Binding Reconnect.OfflineTimeoutSeconds}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,16"/>

                <Separator Margin="0,8,0,16"/>

                <!-- MySQL Settings -->
                <TextBlock Text="MySQL Database Settings" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>

                <CheckBox Content="Enable MySQL logging" IsChecked="{Binding MySQL.Enabled}" Margin="0,0,0,12"/>

                <TextBlock Text="Hostname:"/>
                <TextBox Text="{Binding MySQL.Hostname}" Margin="0,4,0,12"/>

                <TextBlock Text="Port:"/>
                <TextBox Text="{Binding MySQL.Port}" Width="80" HorizontalAlignment="Left" Margin="0,4,0,12"/>

                <TextBlock Text="Database:"/>
                <TextBox Text="{Binding MySQL.Database}" Margin="0,4,0,12"/>

                <TextBlock Text="Username:"/>
                <TextBox Text="{Binding MySQL.Username}" Margin="0,4,0,12"/>

                <TextBlock Text="Password:"/>
                <PasswordBox x:Name="MySqlPasswordBox" Margin="0,4,0,4"/>
                <TextBlock Text="  • Leave empty to keep existing password"
                           FontSize="10" Foreground="Gray" Margin="0,0,0,16"/>

                <Separator Margin="0,8,0,16"/>

                <!-- Advanced Settings -->
                <TextBlock Text="Advanced Settings" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>

                <TextBlock Text="FFmpeg arguments:"/>
                <TextBox Text="{Binding FFmpegArgs}" TextWrapping="Wrap" Height="60" Margin="0,4,0,12"/>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Width="100" Margin="0,0,8,0" Click="Ok_Click">OK</Button>
            <Button Width="100" Click="Cancel_Click">Cancel</Button>
        </StackPanel>
    </Grid>
</Window>